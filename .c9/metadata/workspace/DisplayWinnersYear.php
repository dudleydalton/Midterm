{"changed":true,"filter":false,"title":"DisplayWinnersYear.php","tooltip":"/DisplayWinnersYear.php","value":"<!DOCTYPE html>\n<html>\n    <head>\n        <title>Midterm</title>\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"main.css\" />\n    </head>\n<body>\n        <h2>Here is a list of winners</h2>\n    <?php\n    $servername = \"localhost\";\n    $username = 'siteuser';\n    $password = 'mypass';\n    $dbname=\"Olympics\";\n    \n    //create connection\n    $conn = new mysqli($servername, $username, $password, $dbname);\n    \n    //check connection\n    if ($conn->connect_error) {\n     die(\"Connection failed: \" . $conn->connect_error);\n    } \n    \n        \n        //retrieve all \n        $query = \"SELECT * FROM winners\";\n        $winners = $conn->query($query);\n    ?>\n    \n    <?php\n    while($row = $winners->fetch_assoc()) {\n        echo $row[\"FirstName\"];\n        echo $row[\"LastName\"];\n        echo $row[\"YearID\"];\n        echo $row[\"County\"];\n    }\n    \n    ?>\n</body>\n</html>","undoManager":{"mark":8,"position":9,"stack":[[{"start":{"row":1,"column":0},"end":{"row":1,"column":32},"action":"insert","lines":["require_once(\"Includes/db.php\");"],"id":1}],[{"start":{"row":1,"column":0},"end":{"row":1,"column":32},"action":"remove","lines":["require_once(\"Includes/db.php\");"],"id":2}],[{"start":{"row":0,"column":0},"end":{"row":2,"column":2},"action":"remove","lines":["<?php","","?>"],"id":3},{"start":{"row":0,"column":0},"end":{"row":148,"column":7},"action":"insert","lines":["<!DOCTYPE html>","<html>","    <head>","        <title>Midterm</title>","        <link rel=\"stylesheet\" type=\"text/css\" href=\"main.css\" />","    </head>","<body>","<?php","    $servername = \"localhost\";","    $username = 'siteuser';","    $password = 'mypass';","    $dbname=\"Olympics\";","    ","    //create connection","    $conn = new mysqli($servername, $username, $password, $dbname);","    ","    //check connection","    if ($conn->connect_error) {","     die(\"Connection failed: \" . $conn->connect_error);","    } ","    ","    //create the query to get the categories","    $query = \"SELECT semester FROM course\";","    $result = $conn->query($query);","    ","    //Create dropdown list","    ?>","    <h2>What would you like to do?</h2>","    <a href=\"DisplayCountryWinners.php\">Display all winners from a country</a>","    <br>","    <a href=\"DisplayWinnersYear.php\">Display all winners in an Olympic Year</a>","    <br>","    <a href=\"AddCountry.php\">Add a new country</a></option>","    <br>","    <a href=\"AddYear.php\">Add a new Olympic year(example: add 2016 in Rio)</a>","    <br>","        <?php","        ","        ","        if(isset($_POST['semesterChosen']))","        {","        $semesterChosen = $_POST['semesterChosen']; ","        $subjectChosen = $_POST['subjectChosen'];","        ","        //dont have to specify which table every time","        //$query = \"SELECT * FROM course ","        //WHERE course.semester = '$semesterChosen' ","        //AND coursesubject ='$subjectChosen'\";","        ","        //retrieve all classes","        $query = \"SELECT * FROM course ","        WHERE semester = '$semesterChosen' ","        AND subject ='$subjectChosen'\";","        $classes = $conn->query($query);","","        //retrieve all instructors","        $query = \"SELECT * FROM instructor\";","        $instructors = $conn->query($query);","        ","        //retrieve all rooms","        $query = \"SELECT * FROM room\";","        $rooms = $conn->query($query);","        ","        //retrieve all schedules","        $query = \"SELECT * FROM schedule\";","        $schedule = $conn->query($query);","        ","        echo \"<br>\";"," ","        ?>","            <?php","            ","            if ($classes->num_rows > 0) {","                // output data of each row","                while($row = $classes->fetch_assoc() and $row2 = $instructors->fetch_assoc() and $row3 = $rooms->fetch_assoc() and $row4 = $schedule->fetch_assoc()) {","                    ?>","                    <table>","                    <tr>","                        <td colspan='7' id=\"tdfirst\"><?php echo $row[\"subject\"]. \" \".$row[\"courseNum\"]; ?></td>","                    </tr>","                    <tr>","                        <td id=\"td1\" colspan='7'><?php echo $row[\"courseName\"]; ?> </td>","                    </tr>","                    <tr>","                        <td id=\"td1\" colspan='7'><?php echo \"Credits: 3\"; ?></td>","                    </tr>","                    <tr>","                        <td id =\"td2\" colspan='7'><?php echo $row[\"description\"]; ?> </td>","                    </tr>","                    <tr>","                        <th>CRN</th>","                        <th>Section</th>","                        <th>Day</th>","                        <th>Time</th>","                        <th>Location</th>","                        <th>Instructor</th>","                        <th>Begin/End <br> Dates</th>","                    ","                    </tr>","                    <tr>","                        <th><?php echo $row[\"CRN\"]; ?></th>","                        <td><?php echo $row[\"sectionID\"]; ?></td>","                        ","                        ","                        ","                        <?php","                        //Print the days and start and end time","                        $CRNCheck = $row[\"CRN\"];","                        //$newquery = \"SELECT schedule.* FROM schedule WHERE schedule.courseScheduleID = '$CRNCheck'\";","                        $newquery = \"SELECT * FROM schedule WHERE schedule.courseScheduleID = '$CRNCheck'\";","                        $result = $conn->query($newquery);","                        $row7 = $result->fetch_assoc();","                        ?>","                        <td><?php echo $row7[\"days\"]?></td>","                        ","                        <td><?php echo $row7[\"startTime\"]. \" - \" . $row7[\"endTime\"]; ?></td>","                        ","                        <?php","                        //Print the room number and building","                        $check = $row[\"courseNum\"];","                        //$newquery = \"SELECT room.* FROM room WHERE room.courseRoom = '$check'\";","                        $newquery = \"SELECT * FROM room WHERE room.courseRoom = '$check'\";","                        $result = $conn->query($newquery);","                        $row5 = $result->fetch_assoc();","                        ?>","                        <td><?php echo $row5[\"building\"]. \"-\" . $row5[\"roomNum\"]; ?></td>","                        ","                        <?php","                        //Print the instructor and the start and end date","                        //$newquery = \"SELECT instructor.* FROM instructor WHERE instructor.classTaught = '$check'\";","                        $newquery = \"SELECT * FROM instructor WHERE instructor.classTaught = '$check'\";","                        $result = $conn->query($newquery);","                        $row6 = $result->fetch_assoc();","                        ?>","                        <td><?php echo $row6[\"lastName\"]. \", \" . $row6[\"firstName\"]. \"<br>\" .$row6[\"initial\"]; ?></td>","                        <td><?php echo $row7[\"startDate\"]. \" - \" . $row7[\"endDate\"]; ?></td>","                    </tr>","                    </table>","                    <?php","                    echo \"<br>\" . \"<br>\" . \"<br>\";","                }","                }else {","                    echo \"There is no classes for that subject on the selected semester.\";","            } ","        }","$conn->close();","?>","</body>","</html>"]}],[{"start":{"row":0,"column":0},"end":{"row":147,"column":7},"action":"remove","lines":["<!DOCTYPE html>","<html>","    <head>","        <title>Midterm</title>","        <link rel=\"stylesheet\" type=\"text/css\" href=\"main.css\" />","    </head>","<body>","<?php","    $servername = \"localhost\";","    $username = 'siteuser';","    $password = 'mypass';","    $dbname=\"Olympics\";","    ","    //create connection","    $conn = new mysqli($servername, $username, $password, $dbname);","    ","    //check connection","    if ($conn->connect_error) {","     die(\"Connection failed: \" . $conn->connect_error);","    } ","    ","    //create the query to get the categories","    $query = \"SELECT semester FROM course\";","    $result = $conn->query($query);","    ","    //Create dropdown list","    ?>","    <h2>What would you like to do?</h2>","    <a href=\"DisplayCountryWinners.php\">Display all winners from a country</a>","    <br>","    <a href=\"DisplayWinnersYear.php\">Display all winners in an Olympic Year</a>","    <br>","    <a href=\"AddCountry.php\">Add a new country</a></option>","    <br>","    <a href=\"AddYear.php\">Add a new Olympic year(example: add 2016 in Rio)</a>","    <br>","        <?php","        ","        ","        if(isset($_POST['semesterChosen']))","        {","        $semesterChosen = $_POST['semesterChosen']; ","        $subjectChosen = $_POST['subjectChosen'];","        ","        //dont have to specify which table every time","        //$query = \"SELECT * FROM course ","        //WHERE course.semester = '$semesterChosen' ","        //AND coursesubject ='$subjectChosen'\";","        ","        //retrieve all classes","        $query = \"SELECT * FROM course ","        WHERE semester = '$semesterChosen' ","        AND subject ='$subjectChosen'\";","        $classes = $conn->query($query);","","        //retrieve all instructors","        $query = \"SELECT * FROM instructor\";","        $instructors = $conn->query($query);","        ","        //retrieve all rooms","        $query = \"SELECT * FROM room\";","        $rooms = $conn->query($query);","        ","        //retrieve all schedules","        $query = \"SELECT * FROM schedule\";","        $schedule = $conn->query($query);","        ","        echo \"<br>\";"," ","        ?>","            <?php","            ","            if ($classes->num_rows > 0) {","                // output data of each row","                while($row = $classes->fetch_assoc() and $row2 = $instructors->fetch_assoc() and $row3 = $rooms->fetch_assoc() and $row4 = $schedule->fetch_assoc()) {","                    ?>","                    <table>","                    <tr>","                        <td colspan='7' id=\"tdfirst\"><?php echo $row[\"subject\"]. \" \".$row[\"courseNum\"]; ?></td>","                    </tr>","                    <tr>","                        <td id=\"td1\" colspan='7'><?php echo $row[\"courseName\"]; ?> </td>","                    </tr>","                    <tr>","                        <td id=\"td1\" colspan='7'><?php echo \"Credits: 3\"; ?></td>","                    </tr>","                    <tr>","                        <td id =\"td2\" colspan='7'><?php echo $row[\"description\"]; ?> </td>","                    </tr>","                    <tr>","                        <th>CRN</th>","                        <th>Section</th>","                        <th>Day</th>","                        <th>Time</th>","                        <th>Location</th>","                        <th>Instructor</th>","                        <th>Begin/End <br> Dates</th>","                    ","                    </tr>","                    <tr>","                        <th><?php echo $row[\"CRN\"]; ?></th>","                        <td><?php echo $row[\"sectionID\"]; ?></td>","                        ","                        ","                        ","                        <?php","                        //Print the days and start and end time","                        $CRNCheck = $row[\"CRN\"];","                        //$newquery = \"SELECT schedule.* FROM schedule WHERE schedule.courseScheduleID = '$CRNCheck'\";","                        $newquery = \"SELECT * FROM schedule WHERE schedule.courseScheduleID = '$CRNCheck'\";","                        $result = $conn->query($newquery);","                        $row7 = $result->fetch_assoc();","                        ?>","                        <td><?php echo $row7[\"days\"]?></td>","                        ","                        <td><?php echo $row7[\"startTime\"]. \" - \" . $row7[\"endTime\"]; ?></td>","                        ","                        <?php","                        //Print the room number and building","                        $check = $row[\"courseNum\"];","                        //$newquery = \"SELECT room.* FROM room WHERE room.courseRoom = '$check'\";","                        $newquery = \"SELECT * FROM room WHERE room.courseRoom = '$check'\";","                        $result = $conn->query($newquery);","                        $row5 = $result->fetch_assoc();","                        ?>","                        <td><?php echo $row5[\"building\"]. \"-\" . $row5[\"roomNum\"]; ?></td>","                        ","                        <?php","                        //Print the instructor and the start and end date","                        //$newquery = \"SELECT instructor.* FROM instructor WHERE instructor.classTaught = '$check'\";","                        $newquery = \"SELECT * FROM instructor WHERE instructor.classTaught = '$check'\";","                        $result = $conn->query($newquery);","                        $row6 = $result->fetch_assoc();","                        ?>","                        <td><?php echo $row6[\"lastName\"]. \", \" . $row6[\"firstName\"]. \"<br>\" .$row6[\"initial\"]; ?></td>","                        <td><?php echo $row7[\"startDate\"]. \" - \" . $row7[\"endDate\"]; ?></td>","                    </tr>","                    </table>","                    <?php","                    echo \"<br>\" . \"<br>\" . \"<br>\";","                }","                }else {","                    echo \"There is no classes for that subject on the selected semester.\";","            } ","        }","$conn->close();","?>","</body>"],"id":4}],[{"start":{"row":0,"column":0},"end":{"row":1,"column":7},"action":"remove","lines":["","</html>"],"id":5},{"start":{"row":0,"column":0},"end":{"row":9,"column":7},"action":"insert","lines":["<!DOCTYPE html>","<html>","    <head>","        <title>Midterm</title>","        <link rel=\"stylesheet\" type=\"text/css\" href=\"main.css\" />","    </head>","<body>","    ","</body>","</html>"]}],[{"start":{"row":7,"column":4},"end":{"row":23,"column":6},"action":"insert","lines":["    ","    <?php","        ","        //retrieve all ","        $query = \"SELECT * FROM winners\";","        $winners = $conn->query($query);","    ?>","    ","    <?php","    while($row = $winners->fetch_assoc()) {","        echo $row[\"FirstName\"];","        echo $row[\"LastName\"];","        echo $row[\"YearID\"];","        echo $row[\"County\"];","    }","    ","    ?>"],"id":6}],[{"start":{"row":8,"column":9},"end":{"row":9,"column":0},"action":"insert","lines":["",""],"id":7},{"start":{"row":9,"column":0},"end":{"row":9,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":9,"column":4},"end":{"row":21,"column":4},"action":"insert","lines":["    $servername = \"localhost\";","    $username = 'siteuser';","    $password = 'mypass';","    $dbname=\"Olympics\";","    ","    //create connection","    $conn = new mysqli($servername, $username, $password, $dbname);","    ","    //check connection","    if ($conn->connect_error) {","     die(\"Connection failed: \" . $conn->connect_error);","    } ","    "],"id":8}],[{"start":{"row":9,"column":4},"end":{"row":9,"column":8},"action":"remove","lines":["    "],"id":9}],[{"start":{"row":7,"column":8},"end":{"row":7,"column":42},"action":"insert","lines":["<h2>Here is a list of winners</h2>"],"id":10}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":7,"column":42},"end":{"row":7,"column":42},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1476220924607}